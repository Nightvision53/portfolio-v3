---
title: Javascript Generators
date: 2023-01-03
description: A JavaScript generator function that yields an infinite sequence of prime numbers, and demonstrates how to iterate over the sequence using various looping constructs.
tag: javascript, generators, es5
author: Ä°brahim BABAL
---

# JavaScript Generators

JavaScript generators are a powerful feature that allow you to create iterable objects that can be used to produce a sequence of values. In this post, we'll explore how to use a generator to generate an infinite sequence of prime numbers.
Generating Prime Numbers with a Generator

To generate an infinite sequence of prime numbers, we can use a generator function that has an infinite loop. Inside the loop, we'll use a helper function to determine whether a given number is prime. If the number is prime, we'll yield it from the generator. Here's the code for the generator and the isPrime helper function:

```javascript
function* primeGenerator() {
  let num = 2;
  while (true) {
    if (isPrime(num)) {
      yield num;
    }
    num++;
  }
}
```

```javascript
function isPrime(num) {
  for (let i = 2; i < num; i++) {
    if (num % i === 0) {
      return false;
    }
  }
  return num !== 1;
}
```

Now that we have our generator function, we can use it to generate an infinite sequence of prime numbers.

## Iterating Over the Prime Numbers

There are several ways we can iterate over the prime numbers generated by the generator. One way is to use a for-of loop:

```javascript
for (const prime of primeGenerator()) {
  console.log(prime);
  if (prime > 10) {
    break;
  }
}

// Output:
// 2
// 3
// 5
// 7
// 11
```

Another way is to use a while loop:

```javascript
const primeNumbers = primeGenerator();
let prime = primeNumbers.next().value;
while (prime <= 10) {
  console.log(prime);
  prime = primeNumbers.next().value;
}

// Output:
// 2
// 3
// 5
// 7
// 11
```

Finally, we can use the forEach method of the Symbol.iterator property of the generator function:

```javascript
[...primeGenerator()].forEach(prime => console.log(prime));

// Output:
// 2
// 3
// 5
// 7
// 11
```

In each of these examples, the loop will iterate over the prime numbers generated by the generator, starting with 2 and continuing indefinitely (unless the loop is terminated early, as in the for-of loop example above).

## Limiting the Number of Iterations

In the examples above, the loops will run indefinitely unless we terminate them early. If we want to limit the number of iterations, we can use a counter variable to keep track of the number of iterations and terminate the loop when the counter reaches a certain value. Here's an example using the forEach method:

```javascript

let count = 0;
[...primeGenerator()].forEach(prime => {
  console.log(prime);
  if (++count === 5) {
    return false;
  }
});

// Output:
// 2
// 3
// 5
// 7
```

Alternatively, we can use the take function from the lodash library to create an array of the first n elements of the generator and iterate over that array:

```javascript
const _ = require('lodash');

_.take(primeGenerator(), 5).forEach(prime => console.log(prime));

// Output:
// 2
// 3
// 5
// 7
// 11
```

This will also terminate the loop after the first 5 prime numbers have been logged to the console.

## Conclusion

In this post, we saw how to use a JavaScript generator to generate an infinite sequence of prime numbers, and how to iterate over that sequence using various looping constructs. Generators are a powerful tool that can be used to create iterable objects and control the flow of iteration in your code.
